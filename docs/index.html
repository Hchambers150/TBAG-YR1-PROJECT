<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Text Based Adventure Game</title>
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="startup.css" />
    <link rel="stylesheet" href="contextMenu.css"/>

</head>
<body>

    <!--button id="playBtn" onclick="startAnim()">PLEASE PLAY IN FULLSCREEN & CLICK ME TO CONTINUE.</!--button-->

    <div id="startup" style="">
        <span id="title">Welcome to my project!</span>
        <br>
        <span style="display:block;">What is your name? </span><input id="charName" type="text">
        <br>
        <div id="remainingPointsWrapper">
            <span id="remainingText">Remaining Skillpoints: </span>
            <p class="stat" id="remainingStat">27</p>
            <div class="shape" id="skillpointsShape"></div>

        </div>
        <br><br>
        <!-- stat grid-->
        <div id="stat_grid">

            <div id="con" class="stats">
                <div class="statBox">
                    <p class="statText" id="conText">Con</p><br>
                    <p class="stat" id="conStat">8</p>
                    <!--<p class="miniStat" id="conMini">+1</p>-->
                    <div class="shape">
                        <div class="minus" onclick="decreaseStat('conStat')">-</div>
                        <div class="plus" onclick="increaseStat('conStat')">+</div>
                    </div>
                </div>
                <div class="statExplained">
                    <span class="statETitle"><u>Constitution</u></span><br>
                    <span class="statEText">
                        Constitution is your <font class="important">Health.</font><br><br>
                        By having a higher Constitution, you'll be able to <font class="special">endure more</font> <font class="important">attacks;</font> and poison.
                    </span>
                </div>
            </div>

            <div id="dex" class="stats">
                <div class="statBox">
                    <p class="statText" id="dexText">Dex</p><br>
                    <p class="stat" id="dexStat">8</p>

                    <div class="shape">
                        <div class="minus" onclick="decreaseStat('dexStat')">-</div>
                        <div class="plus" onclick="increaseStat('dexStat')">+</div>
                    </div>
                </div>
                <div class="statExplained">
                    <span class="statETitle"><u>Dexterity</u></span>
                    <br>
                        <span class="statEText">
                            Dexterity is your <font class="special">Agility.</font><br><br>
                            By having a higher Dexterity, you'll have a higher chance of <font class="special">bypassing & disarming</font> <font class="important">traps.</font>
                        </span>
                </div>
            </div>

            <div id="str" class="stats">
                <div class="statBox">
                    <p class="statText" id="strText">Str</p><br>
                    <p class="stat" id="strStat">8</p>

                    <div class="shape">
                        <div class="minus" onclick="decreaseStat('strStat')">-</div>
                        <div class="plus" onclick="increaseStat('strStat')">+</div>
                    </div>
                </div>
                <div class="statExplained">
                    <span class="statETitle"><u>Strength</u></span><br>
                        <span class="statEText">
                            Strength is your <font class="important">Attack Damage.</font><br><br>
                            By having a higher Strength, you'll do <font class="special">more damage</font> <font class="important">through physical attacks.</font>
                        </span>
                </div>
            </div>

            <div id="int" class="stats">
                <div class="statBox">
                    <p class="statText" id="intText">Int</p><br>
                    <p class="stat" id="intStat">8</p>

                    <div class="shape">
                        <div class="minus" onclick="decreaseStat('intStat')">-</div>
                        <div class="plus" onclick="increaseStat('intStat')">+</div>
                    </div>
                </div>
                <div class="statExplained">
                    <span class="statETitle"><u>Intuition</u></span><br>
                        <span class="statEText">
                            Intuition is your <font class="mystical">Intelligence.</font><br><br>
                            By having a higher Intuition, you'll do <font class="special">more damage</font> <font class="mystical">from magic attacks.</font>
                        </span>
                </div>
            </div>

            <div id="wis" class="stats">
                <div class="statBox">
                    <p class="statText" id="wisText">Wis</p><br>
                    <p class="stat" id="wisStat">8</p>

                    <div class="shape">
                        <div class="minus" onclick="decreaseStat('wisStat')">-</div>
                        <div class="plus" onclick="increaseStat('wisStat')">+</div>
                    </div>
                </div>
                <div class="statExplained">
                    <span class="statETitle"><u>Wisdom</u></span><br>
                        <span class="statEText">
                            Wisdom is your <font class="special">knowledge.</font><br><br>
                            By having a higher Wisdom, you'll <font class="special">know more</font> about <font class="mystical">History, Magic, & Monsters.</font>
                        </span>
                </div>
            </div>

            <div id="cha" class="stats">
                <div class="statBox">

                    <p class="statText" id="chaText">cha</p><br>
                    <p class="stat" id="chaStat">8</p>

                    <div class="shape">
                        <div class="minus" onclick="decreaseStat('chaStat')">-</div>
                        <div class="plus" onclick="increaseStat('chaStat')">+</div>
                    </div>
                </div>
                <div class="statExplained">
                    <span class="statETitle"><u>Charisma</u></span><br>
                        <span class="statEText">
                            Charisma is your <font class="special">Charm.</font><br><br>
                            By having a higher Charisma, you'll <font class="special">make more friends.</font>
                        </span>
                </div>
            </div>

        </div>
        <br><br>
        <br><br>
        <button id="go_btn" onclick="getStats()">Continue...</button>
        <div id="errors"></div>
    </div>

    <div id="main">
        <div id="textArea">
            <p id="output">

                As a <font class="special">child</font>, your <font class="important">Father</font> never really paid attention to you.<br>


                <div id="picArea">
                    <img class="image" src="https://www.pikpng.com/pngl/m/174-1746426_storm-trooper-mask-pixel-art-star-wars-clipart.png" />
                </div>
            </p>

        </div>

        <div id="inputWrap">
            <input id="input" value="Type here...">
            <div id="presets">

            </div>
        </div>

        <div id="fixedArea">
            <div id="gearArea">
                <div id="equipment">
                    <div class="grid-container">
                        <div class="helm">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="body">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="hp-mana">
                            <span id="health" class="important">Health: 6</span><br>
                            <span id="mana" class="">Mana: 19</span>
                        </div>
                        <div class="weapon">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="boots">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="legs">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="image"><img id="image" src="charImg.png"></div>
                        <div class="gloves">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="ring">
                            <div id="weaponDrop" ondrop="drop(event)" ondragover="allowDrop(event)">

                            </div>
                        </div>
                        <div class="name">
                            <span id="gearTitle"></span>
                        </div>
                    </div>
                </div>
                <div id="inventory">
                    <span id="inventTitle">Inventory: </span>
                    <div id="inventoryGrid">
                        <div class="inventorySlot" id="slot1">
                            <div id="lootWeaponTest" draggable="true" ondragstart="drag(event)">

                            </div>
                        </div>
                        <div class="inventorySlot" id="slot2"><img src="swordTemp.jpg" draggable="true" ondragstart="drag(event)"></div>
                        <div class="inventorySlot" id="slot3"></div>
                        <div class="inventorySlot" id="slot4"></div>
                        <div class="inventorySlot" id="slot5"></div>
                        <div class="inventorySlot" id="slot6"></div>
                        <div class="inventorySlot" id="slot7"></div>
                        <div class="inventorySlot" id="slot8"></div>
                        <div class="inventorySlot" id="slot9"></div>
                        <div class="inventorySlot" id="slot10"></div>
                        <div class="inventorySlot" id="slot11"></div>
                        <div class="inventorySlot" id="slot12"></div>
                        <div class="inventorySlot" id="slot13"></div>
                        <div class="inventorySlot" id="slot14"></div>
                        <div class="inventorySlot" id="slot15"></div>
                        <div class="inventorySlot" id="slot16"></div>
                        <div class="inventorySlot" id="slot17"></div>
                        <div class="inventorySlot" id="slot18"></div>
                        <div class="inventorySlot" id="slot19"></div>
                        <div class="inventorySlot" id="slot20"></div>
                        <div class="inventorySlot" id="slot21"></div>
                        <div class="inventorySlot" id="slot22"></div>
                        <div class="inventorySlot" id="slot23"></div>
                        <div class="inventorySlot" id="slot24"></div>
                        <div class="inventorySlot" id="slot25"></div>
                        <div class="inventorySlot" id="slot26"></div>
                        <div class="inventorySlot" id="slot27"></div>
                        <div class="inventorySlot" id="slot28"></div>
                        <div class="inventorySlot" id="slot29"></div>
                        <div class="inventorySlot" id="slot30"></div>
                    </div>
                </div>
            </div>
            <div id="statArea">
                <div id="statGrid">
                    <div class="statGridStat">
                        <span class="statTitle">Con:</span>
                        <p class="liveStat" id="conLive">10</p>
                        <div class="statShape"></div>
                    </div>
                    <div class="statGridStat">
                        <span class="statTitle">Dex:</span>
                        <p class="liveStat" id="dexLive">10</p>
                        <div class="statShape"></div>
                    </div>
                    <div class="statGridStat">
                        <span class="statTitle">Str:</span>
                        <p class="liveStat" id="strLive">10</p>
                        <div class="statShape"></div>
                    </div>
                    <div class="statGridStat">
                        <span class="statTitle">Int:</span>
                        <p class="liveStat" id="intLive">10</p>
                        <div class="statShape"></div>
                    </div>
                    <div class="statGridStat">
                        <span class="statTitle">Wis:</span>
                        <p class="liveStat" id="wisLive">10</p>
                        <div class="statShape"></div>
                    </div>
                    <div class="statGridStat">
                        <span class="statTitle">Cha:</span>
                        <p class="liveStat" id="chaLive">10</p>
                        <div class="statShape"></div>
                    </div>
                </div>
            </div>
            <div id="mapArea">
                <textarea id="map">
                    █ █████████████████████████████
                    █ ████████              ███████
                    █                       ███████
                    ██████████              ███████
                    ████████████████  █████████████
                    ██            ██  █████████████
                    ██            ██              █
                    ██            ██  ██████████  █
                    █████  █████████  ██████████  █
                    █████                         █
                    ███████████████████████████████

                </textarea>
            </div>
        </div>
    </div>

    <menu id="ctxMenu">
        <menu title="File">
            <menu title="Save"></menu>
            <menu title="Save As"></menu>
            <menu title="Open"></menu>
         </menu>
        <menu title="Edit">
            <menu title="Cut"></menu>
            <menu title="Copy"></menu>
             <menu title="Paste"></menu>
        </menu>
    </menu>

</body>
</html>

<script>

    //var notepad = document;
    //notepad.addEventListener("contextmenu",function(event){
    //    event.preventDefault();
    //    var ctxMenu = document.getElementById("ctxMenu");
    //    ctxMenu.style.display = "block";
    //    ctxMenu.style.left = (event.pageX - 10)+"px";
    //    ctxMenu.style.top = (event.pageY - 10)+"px";
    //},false);
    //notepad.addEventListener("click",function(event){
    //    var ctxMenu = document.getElementById("ctxMenu");
    //    ctxMenu.style.display = "";
    //    ctxMenu.style.left = "";
    //    ctxMenu.style.top = "";
    //},false);

    //startup.style.webkitAnimationPlayState = "paused";

    var minus = document.getElementById("minus");
    var errors = document.getElementById("errors");
    var skillpoints = document.getElementById("remainingStat");
    var statPoints = 27;

    var objDiv = document.getElementById("textArea");
    objDiv.scrollTop = objDiv.scrollHeight + '1000px';

    function startAnim() {
        startup.style.webkitAnimationPlayState = "running";
        document.getElementById("playBtn").style.display = "none";
    }

    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        ev.target.appendChild(document.getElementById(data));
    }

    function increaseStat(x) {
        //console.log(x);
        var statInt = parseInt(document.getElementById(x).innerText);
        var stat = document.getElementById(x);

        if (statInt == 20) {
            errors.innerText = "Your stat scores may not go above 20!";
        } else {
            errors.innerText = "";
        }

        if (statPoints == 0) {
            errors.innerText = "You're out of stat points!"
        }

        if (statInt < 20 && statPoints > 0) {
            stat.innerText = statInt + 1;
            statPoints--;
            console.log(statPoints);
        }

        if (stat.innerText.length == 2) {
            stat.style.left = "-0.5em";
        } else {
            stat.style.left = "-0.2em";
        }

        skillpoints.innerText = statPoints;
        if (skillpoints.innerText.length == 2) {
            skillpoints.style.left = "-1.3em";
        } else {
            skillpoints.style.left = "-1em";
        }
        
    }

    function decreaseStat(x) {
        //console.log(x);
        var stat = document.getElementById(x);
        var statInt = parseInt(document.getElementById(x).innerText);
        var skillpoints = document.getElementById("remainingStat");

        //console.log(statInt);
        if (statInt == 8) {
            errors.innerText = "Your stat scores may not go lower than 8!";
        } else {
            errors.innerText = "";
        }

        if (statInt > 8) {
            stat.innerText = statInt - 1;
            statPoints++;
        } 

        if (stat.innerText.length == 2) {
            stat.style.left = "-0.5em";
        } else {
            stat.style.left = "-0.2em";
        }

        skillpoints.innerText = statPoints;
        if (skillpoints.innerText.length == 2) {
            skillpoints.style.left = "-1.3em";
        } else {
            skillpoints.style.left = "-1em";
        }

    }

    var name;
    var con = 20;
    var dex;
    var str;
    var int;
    var wis;
    var cha;

    function getStats() {
        name = document.getElementById("charName").value;
        if (statPoints == 0 && name != "") {
            name = document.getElementById("charName").value;
            con = parseInt(document.getElementById("conStat").innerText);
            dex = parseInt(document.getElementById("dexStat").innerText);
            str = parseInt(document.getElementById("strStat").innerText);
            int = parseInt(document.getElementById("intStat").innerText);
            wis = parseInt(document.getElementById("wisStat").innerText);
            cha = parseInt(document.getElementById("chaStat").innerText);

            document.getElementById("startup").style.animation = '1s ease-out 0s 1 slideOutToTop';
            document.getElementById("startup").style.display = 'none';
            document.getElementById("main").style.display = 'block';

            console.log(name, con, dex, str, int, wis, cha);
            setStats();
        } else if (statPoints == 27) {
            document.getElementById("startup").style.display = 'none';
            document.getElementById("main").style.display = 'block';
            setStats();
        } else if (name == "" || name.length > 20) {
            errors.innerText = "Invalid name! Max length: 20";

        } else if (statPoints == 0) {
            errors.innerText = "You've not spent all of your stat points!";
        }
    }

    function setStats() {
        var liveCon = document.getElementById("conLive");
        var liveDex = document.getElementById("dexLive");
        var liveStr = document.getElementById("strLive");
        var liveInt = document.getElementById("intLive");
        var liveWis = document.getElementById("wisLive");
        var liveCha = document.getElementById("chaLive");

        var checkPos = [liveCon, liveDex, liveStr, liveInt, liveWis, liveCha];

        liveCon.innerText = con;
        liveDex.innerText = dex;
        liveStr.innerText = str;
        liveInt.innerText = int;
        liveWis.innerText = wis;
        liveCha.innerText = cha;

        document.getElementById("gearTitle").innerText = name;

        for (var i = 0; i < checkPos.length; i++) {
            if (checkPos[i].innerText.length == 1){
                checkPos[i].style.left = "1.15em";
            }

        }
    }

</script>
